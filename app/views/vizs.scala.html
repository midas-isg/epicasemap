@import tags._

@imports = {
	@ng_imports()
	@script_asset("javascripts/ng/controllers/vizs.js")
	@script_asset("javascripts/ng/controllers/viz.js")
	@script_asset("javascripts/ng/controllers/series.js")
	@script_asset("javascripts/ng/controllers/series-data.js")
	@script_asset("javascripts/ng/controllers/viz-permissions.js")
	@script_asset("javascripts/ng/controllers/viz-permission.js")
	@script_asset("javascripts/ng/controllers/series-permissions.js")
	@script_asset("javascripts/ng/controllers/series-permission.js")
}

@main("Visualization Management", imports) {
	<article id='vizs-body'  ng-app='app' ng-controller='Vizs'>
		@metadata_manager("Visualization", "Visualizations", "viz", 
			Seq(
				Seq(Html("action-3"), Html("Actions"), buttons())
			)
		)
		@viz_dialog()
		@series_dialog()
		@series_data_dialog()
		@viz_permissions_dialog()
		@viz_permission_dialog()
		@series_permissions_dialog()
		@series_permission_dialog()
		@busy_dialog()
	</article>
}

@buttons() = {
	@button_action("play", "go(it)", "can('use', it)")
	@button_action("edit", "edit(it)", "can('read_data', it)")
	@button_action("eye-close", "permit(it)", "can('permit', it)", "edit permissions")
}

@text(a:String, b:String) = {
	@if(a == null){@b}else{@a}
}