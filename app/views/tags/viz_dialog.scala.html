@import tags._

@* Viz modal dialog *@
@()
@bs_modal("modal", "Viz", "Viz Editor", "close()")(editor()){
	<button title="Save the Viz" class='btn-large btn-primary' 
	ng-click='submit()' ng-disabled='working' >
		@bs_icon("save") Save
	</button>
	<button title="Save the Viz & Close the dialog" class='btn-large  btn-primary' 
	ng-click="submitThenClose()" ng-disabled='working'>
		@bs_icon("save") Save & @bs_icon("remove") Close
	</button>
	<button title="Delete the Viz & Close the dialog" class='btn-large btn-danger pull-left' 
	ng-click='removeThenClose()' ng-show='model.id' ng-disabled='working'>
		@bs_icon("trash") Delete & @bs_icon("remove") Close
	</button>
}
@series_dialog()

@editor() = {
	@filters("series", "Series", Seq(Seq("id", "ID"), Seq("name", "Name")))
	<form name='form'>
		<label>ID: </label> {{model.id}}<br>
		<label>Name:  </label>
		<input id='name' type='text' ng-model='model.name'  autofocus><br>
		<label># of selected Series in category A: </label> {{countBy('s1')}}<br>
		<label># of selected Series in category B: </label> {{countBy('s2')}}<br>	
		<h3>
			Selected Series 
			<small title='expand/collapse' ng-click='view.hideSeries = !view.hideSeries'>
				<button class='btn btn-xs'>@bs_icon("expand")</button>
			</small>
		</h3>
		<div ng-hide='view.hideSeries'>
			<div id='filterPlaceholderNotToCountAsPartOfForm'></div>
			<button title='invert Series in category A selection' class='btn btn-xs' ng-click='invertA()'>invert A</button>
			<button title='invert Series in category B selection' class='btn btn-xs' ng-click='invertB()'>invert B</button>
			<button class='btn btn-xs pull-right' ng-click='toggle()'>{{lable()}}</button>
			You have {{count(allSeries)}} series available to select
			<table class='table table-striped table-condensed table-hover'>
				<thead><tr>
						<th>ID</th>
						<th>Name</th>
						<th>A</th>
						<th>B</th>
						<th>Edit</th>
				</tr></thead>
				<tbody>
					<tr class='active' ng-show='isShown(series)'
					 ng-repeat=@filter_repeat("series in allSeries", "series") >
						<td>{{series.id}}</td>
						<td>{{series.name}}</td>
						<td><input title='check to include the Series as Series 1' type='checkbox' ng-model='series.s1'></td>
						<td><input title='check to include the Series as Series 2' type='checkbox' ng-model='series.s2'></td>
						<td>
							<button title='edit' class='btn btn-xs' ng-click='editSeries(series)'>
								@bs_icon("edit")
							</button> 
						</td>
					</tr>
				</tbody>
			</table>
		</div>
	</form>
}