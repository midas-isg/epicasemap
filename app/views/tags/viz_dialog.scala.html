@import tags._ 

@* Viz modal dialog *@
@(
	orders:Seq[Seq[String]] =Seq(Seq("id", "ID"), Seq("title", "Title"), Seq("version", "Version")),
	more:Seq[Seq[Html]] =Seq(
		Seq(Html("a"), Html("A"), Html("<input title='check to include the Series as A' type='checkbox' ng-model='it.s1'>")),
		Seq(Html("b"), Html("B"), Html("<input title='check to include the Series as B' type='checkbox' ng-model='it.s2'>")),
		Seq(Html("action-1"), Html("Edit"), Html("<button title='edit' class='btn btn-xs' ng-click='editSeries(it)'><span class = 'glyphicon glyphicon-edit' aria-hidden='true'></span></button>"))
	)
)
@bs_modal("modal", "Viz", "Viz Editor", "close()")(editor())(modal_buttons("Viz"))
@series_dialog()

@editor(labelSize:Int=3) = {
	@filters("series", "Series", orders)
	<form name='form' class="form-horizontal" role="form">
		@metadata_inputs(labelSize)
		@category("A", "s1", labelSize)
		@category("B", "s2", labelSize)
		@selectedSeriesSection("view.hideSeries")
	</form>
}

@category(cat:String, key:String, labelSize:Int) = {
	@form_group_readonly(
		"# selected Series as " + cat, 
		"{{countBy('" + key +"')}}", 
		"the number of selected Series in category " + cat, 
		labelSize
	)
}

@selectedSeriesSection(varName:String) = {
	@section_expandable(varName){
		<h3>@span_expandable(varName, "Selected Series")</h3>
	}{
		<div id='filterPlaceholderNotToCountAsPartOfForm'></div>
		@buttonInvert("A")
		@buttonInvert("B")
		@buttonHideSeries("showAll")
		You have {{count(allSeries)}} series available to select
		@table_scollarable_content("allSeries", "series", orders, more)
	}
}

@buttonInvert(cat:String) = {
	<button title='invert Series in category @cat selection' class='btn btn-xs' 
	ng-click='invert@{cat}()'>invert @cat</button>
}

@buttonHideSeries(varName:String) = {
	<button class='btn btn-xs pull-right' ng-click='@varName = !@varName'>
		@span_if(varName, Html("Hide series not selected"), "i.e. show only selected series")
		@span_if("!" + varName, Html("Show all series"), "show all series (both selected and not selected)")
	</button>
}